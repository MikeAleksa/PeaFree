{% extends "food_search/subpage_template.html" %}

{% block title %}PeaFree! - {{ paginator.count }} Search Results{% endblock %}

{% block contenttitle %}Results {{ page_obj.start_index }} - {{ page_obj.end_index }} of
    {{ paginator.count }}{% endblock %}

{% block content %}
    <!-- List of Results -->
    <section id="results">
        <div class="lead">
            <!-- Result Items -->
            {% for result in results %}
                <div class="m-auto align-content-center text-center" data-toggle="modal"
                     data-target="#resultModel{{ result.item_num }}">
                    <a href="#/">{{ result.name }}</a>
                </div>
            {% endfor %}
        </div>
    </section>

    <!-- Popover Windows For Each Result -->
    {% for result in results %}
        <div class="portfolio-modal modal fade" id="resultModel{{ result.item_num }}" tabindex="-1" role="dialog"
             aria-labelledby="portfolioModal1Label" aria-hidden="true">
            <div class="modal-dialog modal-xl" role="document">
                <div class="modal-content">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">
            <i class="fas fa-times"></i>
          </span>
                    </button>
                    <div class="modal-body text-center">
                        <div class="container">
                            <div class="row justify-content-center">
                                <div class="col-lg-8">
                                    <!-- Portfolio Modal - Title -->
                                    <h2 class="text-secondary text-uppercase mb-0">{{ result.name }}</h2>
                                    <!-- Icon Divider -->
                                    <div class="divider-custom">
                                        <div class="divider-custom-line"></div>
                                        <div class="divider-custom-icon">
                                            <i class="fas fa-star"></i>
                                        </div>
                                        <div class="divider-custom-line"></div>
                                    </div>
                                    <!-- Portfolio Modal - Text -->
                                    <p class="mb-5">
                                    <dl>
                                        <dt>Meets FDA Guidelines</dt>
                                        <dd style="font-size:2.5rem">
                                            {% if result.fda_guidelines == True %}
                                                <i class="fas fa-check-circle" style="color:green"></i>
                                            {% else %}
                                                <i class="fas fa-times-circle" style="color:red"></i>
                                            {% endif %}
                                        </dd>
                                        <dt>Brand</dt>
                                        <dd> {{ result.brand }}</dd>
                                        <dt>Ingredients</dt>
                                        <dd>{{ result.ingredients }}</dd>
                                        <dt>Breed Sizes</dt>
                                        <dd>{{ result.breeds }}</dd>
                                        <dt>Food Form</dt>
                                        <dd>{{ result.food_form }}</dd>
                                        {% with diets=result.diets %}
                                            {% if diets != None %}
                                                <dt>Special Diet:</dt>
                                                <dd>{{ diets }}</dd>
                                            {% endif %}
                                        {% endwith %}
                                        <dt>Lifestage</dt>
                                        <dd>{{ result.lifestage }}</dd>
                                        <dt><a href="{{ result.url }}" target="_blank">View On
                                            Chewy.com</a></dt>
                                        <br>
                                    </dl>
                                    </p>
                                    <button class="btn btn-primary" href="#" data-dismiss="modal">
                                        <i class="fas fa-times fa-fw"></i>
                                        Close Window
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    {% endfor %}

    {% if is_paginated %}
        <br>
        <ul class="pagination justify-content-center" id="page-ctrl">
            {% if page_obj.has_previous %}
                <li><a class="btn btn-outline-primary" style="margin:.1em"
                       href="?{{ search_vars }}&page={{ page_obj.previous_page_number }}" class="page-link">&laquo;
                    PREV </a></li>
            {% endif %}
            {% if page_obj.has_next %}
                <li><a class="btn btn-outline-primary" style="margin:.1em"
                       href="?{{ search_vars }}&page={{ page_obj.next_page_number }}" class="page-link"> NEXT
                    &raquo;</a></li>
            {% endif %}
        </ul>
    {% endif %}


{% endblock %}
